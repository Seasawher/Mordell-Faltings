
\bfsection{2 Theory of heights}


\bfsubsection{Theorem 2.3}
\barquo{
We set $n = [K:\Q]$. Let $\{ \gro_1, \cdots , \gro_n \}$ be the integral basis of $O_K$. Then $\{ x\gro_1, \cdots , x\gro_n \}$ is a basis of V.
}
\begin{proof}
  There is a $c_{ij} \in \Z$ such that $x \gro_i = \sum_{j} c_{ij} \gro_i$. Set $C= (c_{ij}) \in M_n(\Z)$. Then $\det C = N_{K/\Q}(x) \neq 0 $, so we get $C \in GL_n(\Q)$. And we obtain the assertion.
\end{proof}

\bfsubsection{Proposition 2.5}
\barquo{
\[
h_K(x) \leq \sum_{\grs \in K(\C)} \log \left( \max_{1 \leq i \leq n} \{ \abs{x_i}_{\grs} \} \right).
\]
}
\begin{rem}
  \textblue{Misprint.} Add $1/[K:\Q]$ into the right.
\end{rem}

\bfsubsection{Proposition 2.6}
\barquo{
for any $x \in \ol{\Q}^n$.
}
\begin{rem}
  \textblue{Misprint.} Exclude the case $x = 0$.
\end{rem}




\bfsubsection{Proposition 2.8}
\barquo{
We consider two morphisms $\phi_1 \colon X \to \P^{m_1}$ and $\phi_2 \colon X \to \P^{m_2}$ over $\ol{\Q}$. If $\phi_1^* \calo_{\P^{m_1}} \cong \phi_2^* \calo_{\P^{m_2}}$, then there is a constant $C$ such that, for any $x \in X(\ol{\Q})$,
\[
\abs{ h_{\phi_1}(x) -  h_{\phi_2}(x) } \leq C.
\]
}
\begin{proof} ${}$
  Remark that $\calo_{\P^{m_1}}(1)$ is a Serre's twisted sheaf. See Bosch\cite{Bosch} 9.2/Definition 3. or Hartshorne\cite{ha} section 2.5 Adjacent to Proposition 5.12.
We set $L = \phi_1^* \calo_{\P^{m_1}}$ and set $k = \ol{\Q}$ and $\scrf = \calo_{\P^{m_1}}(1)$. Since $X$ is a projective variety over $k$ and $L$ is an invertible sheaf on $X$, so $H^0(X,L) = \Gamma(X,L)$ is a $k$-vector space of finite dimension. (See Hartshorne\cite{ha} section 2.5 Theorem 5.19. and Hartshorne\cite{ha} section 2.4 Prop 4.10)

Let $\{ t_0, \cdots , t_m \}$ be a basis of $H^0(X,L)$ and let $X_0, \cdots , X_{m_1}$ be the homogenous coordinates of $\P^{m_1}$. Note that each $X_i$ is a global section of $\scrf$. And we set $s_i = \phi_1^* X_i \in H^0(X,L)$, where $\phi_1^* X_i$ is the image of $X_i \in H^0(\P^m, \scrf)$ by the canonical map $\scrf \to {\phi_1}_* \phi_1^* \scrf$.
It follows from Hartshorne\cite{ha} section 2.7 Theorem 7.1 that $s_0, \cdots , s_{m_1}$ generate $L$. Because for any $x \in X$ the each germ $(s_i)_x$ is a linear combination of $(t_j)_x$, so $t_0, \cdots ,t_m$ generate $L$.

There is a morphism $\phi \colon X \to \P^m $ such that $L \cong \phi^* \calo_{\P^m}(1)$ and $s_i = \phi^* X_i$ under this isomorphism. See Hartshorne\cite{ha} section 2.7 Theorem 7.1(b). There is another explanation on what $\phi$ is. For any $x \in X$, we can consider the germ $(t_i)_x \in L_x$. Denote $(t_i)_x$ by $t_i(x)$. Since $L$ is a line bundle, $L_x \cong \calo_{X,x}$.
Then we define the map $\phi \colon X \to \P^m$ by $\phi(x) = (t_0(x), \cdots , t_m(x))$. Note that there is a scalar ambiguity in choice of morphism $L_x \to k$. If $\forall i \; t_i(x) = 0$, then $(t_i)_x$ cannot generate $L_x$, which is a contradiction. Thus for any $x \in X$,
there is an index $i$ such that $t_i(x) \neq 0$.

Then, the rest of the proof is almost trivial.
\end{proof}


\bfsubsection{Theorem 2.9}
\barquo{
First, suppose that $L$ is globally generated.
}
\begin{rem}
  What "globally generated" means? We say $L$ is globally generated iff there is an exact sequence $\bigoplus_I O_X \to L \to 0$. Even if $L$ is an invertible sheaf, $L$ is not necessarily globally generated. For example, set $X = \P^m$, $L = \calo_{\P^m}(-1)$. Since $\Gamma(X,L) = 0$, $L$ is not globally generated.
\end{rem}


\bfsubsection{Theorem 2.9}
\barquo{
Let
\[
\phi_{\abs{L}} \colon X \to \P(H^0(X,L))
\]
be a morphism associated to the complete linear system $\abs{L}$. We set $h_L = h_{\phi_{\abs{L}}}$.
}
\begin{proof}
Note that we want to get $h_L \in \Func(X)/B(X)$, which is not contained in  $\Func(X)$.

What is a $\P(H^0(X,L))$? I think it is isomorphic to $\P^m$ by taking a basis of $H^0(X,L)$.

  Set $k = \ol{\Q}$. Since $L$ be a globally generated line bundle on $X$, there is a basis $s_0, \cdots , s_m$ of $H^0(X,L)$ which generate $L$. Then we get a map $\phi_L \colon X \to \P^m$ such that $\phi_L^* \calo_{\P^m}(1) \cong L$. We define $h_L$ by $h_L = h_{\phi_L}$.
\end{proof}


\bfsubsection{Theorem 2.9}
\barquo{
Then ${s_i \ts t_j} $ induces a morphism $\phi \colon X \to \P^N$ such that $\phi^*(O_{\P^N(1)}) \cong L_1 \ts L_2$.
}
\begin{rem}
  How $s_i \ts t_j \in H^0(X,L_1) \ts_k H^0(X,L_2)$ define an element of $H^0(X,L_1 \ts L_2)$? Let $\scrf$ be a presheaf defined by $\scrf(U) = \grG(U,L_1) \ts_{\calo_{X}(U)} \grG(U,L_2)$. Then there is a canonical morphism $\scrf \to L_1 \ts L_2$ since $L_1 \ts L_2$ is the sheafification of $\scrf$.
  So we can see $s_i \ts t_j \in H^0(X,L_1 \ts L_2)$.

  We denote the image of $s_i \ts t_l$ by $s_it_j \in H^0(X,L_1 \ts L_2)$. Why $\{ s_it_j \}$ generate $L_1 \ts L_2$? Take a stalk.
\end{rem}


\bfsubsection{Theorem 2.9}
\barquo{
tell us that $L \ts A^n$ is globally generated for any sufficiently large $n$.
}
\begin{rem}
  The ampleness of $A$ implies that
  \begin{align*}
    \exists n_1 \st n \geq n_1 &\To L \ts A^n \; \text{is globally generated} \\
      \exists n_2 \st n \geq n_2 &\To  A^n \; \text{is globally generated}
  \end{align*}
  Then we set $n = \max_i \{ n_i\}$.
\end{rem}


\bfsubsection{Theorem 2.9}
\barquo{
Then, modulo $B(X)$, we have
\[
h_{f^*(L)} = h_{f^*(C) \ts f^*(C)^{-1}}
\]
}
\begin{rem}
  See G\"ortz Wedhorn\cite{GW} Remark 7.10.
\end{rem}


\bfsubsection{Theorem 2.9}
\barquo{
Then by (1), $h_L$ must be equal to $h_{L_1} - h_{L_2}$ modulo $B(X)$.
}
\begin{rem}
  Let $\grs \colon \{ \text{line bundles }\} \to \Func(X)/B(X)$ be a map which satisfies the properties (1), (2), (3). By (3), for globally generated line bundle $L$, we get $\grs_L = h_L$. Because $\grG(X,O_X) = k$, we obtain $\grs_{O_X} = 0$. Thus (1) implies that $\grs_L = h_L$ for general line bundle $L$.
\end{rem}


\bfsubsection{Proposition 2.10}
\barquo{
Let $B$ be the Zariski closed subset of $X$ defined by the ideal sheaf
\[
\Im (H^0(X,L) \ts L^{-1} \to O_X).
\]
}
\begin{rem}
  What is the morphism $H^0(X,L) \ts L^{-1} \to O_X$? Note that there is a canonical morphism $f^* f_* L \to L$ where $f \colon X \to \Spec k$ is a $k$-scheme structure. Note that $f_* L$ is isomorphic to $\wt{H^0(X,L)}$. We denote this canonical morphism $f^* f_* L \to L$ by
  \[
  H^0(X,L) \ts O_X \to L.
  \]
  This is surjective if $L$ is globally generated.

  In general, we define $V \ts_k O_X$ for $k$-module $V$, by setting
  \[
  V \ts_k O_k = f^{-1} \wt{V} \ts_{f^{-1}O_{\Spec k}} O_X = f^* \wt{V}.
  \]
Then we get $H^0(X,L) \ts L^{-1} \to O_X$ by tensoring $L^{-1}$.
\end{rem}


\bfsubsection{Proposition 2.10}
\barquo{
Then $\{  s s_i \}$ are linearly independent elements of $H^0(X,L)$.
}
\begin{rem}
  What are $s s_i$ ? Note that there is a canonical morphism
  \[
  H^0(X,L) \ts H^0(X,L_2) \to H^0(X,L \ts L_2) \cong H^0(X,L_1)
  \]
  Thus I guess $s s_i$ is the image of $s \ts s_i$.

  Moreover, why $s s_i$ are linearly independent? It suffices to show that the morphism of $k$-module
  \[
  s \colon H^0(X,L_2) \to H^0(X,L_1)
  \]
  is injective.

  We prepare the following lemma.
  \lem{
  Let $X$ be an integral scheme and let $L$ be a line bundle on $X$. Assume that $s \in H^0(X,L)$ is not zero. Then for any $x \in X$, $s_x \neq 0$ in $L_x$.
  }
  \begin{proof}
    Assume that there is a $z \in X$ such that $s_z = 0$. We want to show $s = 0 \in H^0(X,L)$. Since  $L$ is invertible, there is an open affine covering $X = \bigcup_{i \in I} U_i$ such that
    \[
    U_i = \Spec A_i , \; L|_{U_i} \cong \wt{A_i}
    \]
    On the other hand, $s_z = 0$ implies that there is an open subset $U \subset X$ such that $s|_U = 0$ and $z \in U$. Since $X$ is integral, $U \cap \Spec A_i \neq \emptyset$. Thus there is a $g_i \in A_i \sm \{ 0 \}$ such that $\emptyset \neq D(g_i) \subset U \cap \Spec A_i$. Then $s|_{D(g_i)} = 0$ in $\grG(D(g_i), L) \cong {A_i}_{g_i}$.
    Note that each $A_i$ is an integral domain because $X$ is integral. Thus we get $\forall i \; s|_{U_i}=0$ because $A_i \to {A_i}_{g_i}$ is injective. It follows from the sheaf axiom that $s=0 \in \grG(X,L)$.
  \end{proof}

  Then, we can prove the injectivity of $s \colon O_X \to L$. First, by the lemma, $0 \to O_X \xrightarrow{s} L$ is exact. Since $L_2$ is flat, $0 \to L_2 \xrightarrow{s} L_1$ is exact. Since global section is left exact, we get $0 \to H^0(X,L_2) \xrightarrow{s} H^0(X,L_1)$ is exact.
\end{rem}



\bfsubsection{Proposition 2.10}
\barquo{
Let $s_1, \cdots , s_n$ be a basis of $H^0(X,L)$. $\cdots$

 Because $B = \setmid{x \in X}{s_1(x) = \cdots = s_n(x) = 0}$.
}
\begin{proof}
  Why $B = \setmid{x \in X}{s_1(x) = \cdots = s_n(x) = 0}$? I guess
  \begin{align*}
    B &= \Supp \Coker(H^0(X,L) \ts L^{-1} \to O_X) \\
    &= \Supp \Coker(H^0(X,L) \ts O_X \to L) \ts L^{-1}  &(\text{right exactness of tensor}) \\
    &= \Supp \Coker(H^0(X,L) \ts O_X \to L) \cap \Supp L^{-1} \\
    &= \Supp \Coker(H^0(X,L) \ts O_X \to L)
  \end{align*}
  Thus we get
  \begin{align*}
    x \in B &\iff \Coker(H^0(X,L) \ts O_X \to L)_x \neq 0 \\
    &\iff \forall s \in H^0(X,L) \; x_x \in \frakm_x L_x \\
    &\iff s(x) = 0 \\
    &\iff s_1(x) = \cdots = s_n(x) = 0
   \end{align*}
\end{proof}

\begin{comment}
\bfsubsection{Lemma 2.21}
\barquo{



LEMMA2.21. $\;$ Let $X$ be a projective variety, and let $x_0$ and $x_1$ be closed points of $X$. Then there is a projective curve $C$ on $X$ passing through $x_0$ and $x_1$.

PROOF. If $x_0 = x_1$, then the result is obvious, so we assume that $x_0 \neq x_1$. We show the lemma by induction on dimension of $X$. The dimension one case is obvious. Suppose $\dim X \geq 2$ and let $\pi \colon \tilde{X} \to X$ be the blowup of $X$ along the two points $x_0,x_1$. We embed $\tilde{X}$ into projective space $\P^N$. We take $N$ to be the minimum among such embeddings. For a general hyperplane $H \subset \P^N$,
$\tilde{Y} = \tilde{X} \cap H$ is irreducible and is not contatined in $\pi^{-1}(x_i)$.(See [Hartshorne section.2 theorem8.18])
Further, because $\dim H + \dim \pi^{-1}(x_i) \geq N$, $H \cap \pi^{-1}(x_i) \neq \emptyset$. (See [Hartshorne section.1 theorem 7.2]) If we set $Y = \pi(\tilde{Y}) \subset X$, then $Y$ is a $(\dim X - 1)$-dimensional subvariety of $X$ that contains $x_0$ and $x_1$. By the induction hypothesis, there is a projective curve $C$ on $Y$ that passes through $x_0$ and $x_1$.
This $C$ is a desired curve.
}
\begin{que} ${}$
  \begin{description}
    \item[(1)] 「If $x_0 = x_1$, then the result is obvious」なのはどうしてでしょうか。その点を通る多項式$f$をとって$X \cap V(f)$を考えるとふつうは一つ次元が下がりますが、これを繰り返せばよいということでしょうか。
    \item[(2)] 「We embed $\tilde{X}$ into projective space $\P^N$.」とありますが、$X$が射影的な多様体なら$\tilde{X}$も射影的というHartshorne section 2 命題7.16から従っているのでしょうか。
    \item[(3)] 「$\tilde{Y} = \tilde{X} \cap H$ is irreducible and is not contatined in $\pi^{-1}(x_i)$.」とあります。引用されているBertiniの定理（とHartshorne section 3 注意7.9.1）から既約性がわかるのはいいとして、「and is not contatined in $\pi^{-1}(x_i)$.」はなぜわかるのでしょうか。
    \item[(4)] 「Further, because $\dim H + \dim \pi^{-1}(x_i) \geq N$, $H \cap \pi^{-1}(x_i) \neq \emptyset$」とあります。前半から後半が射影次元定理で従うのはよいです。前半はなぜ判るのでしょうか。
    \item[(5)] 「If we set $Y = \pi(\tilde{Y}) \subset X$, then $Y$ is a $(\dim X - 1)$-dimensional subvariety of $X$ that contains $x_0$ and $x_1$.」とあります。なぜ次元がこうなるのでしょうか。
  \end{description}
\end{que}



\newpage


\bfsubsection{Theorem 2.23}
\barquo{
Theorem 2.23 (Theorem of the cube II)

Let $X,Y$, and $Z$ be geometrically irreducible algebraic varieties over $F$, let $x_0 \in X(F)$, $y_0 \in Y(F)$, and $z_0 \in Z(F)$ be closed points, and let $L$ be a line bundle on $X \times Y \times Z$. Assume that $X$ and $Y$ are projective over $F$. Then $L$ is trivial if and only if
\[
 L|_{\{x_0\} \times Y \times Z}, \; L|_{X \times \{y_0\} \times Z}, \; L|_{X \times Y \times \{z_0\}}
\]
are all trivial.


\textbf{proof of  theorem 2.23}
\begin{description}
  \item[Step 1] Let $p_{13}$ denote the projection $X \times Y \times Z \to X \times Z$ to the first and the last factor. If we show that $L|_{ \{x\} \times Y \times \{z\} }$ is trivial for every closed points $x \in X$ and $z \in Z$, then, by the seesaw theorem, we can find a line bundle $M$ on $X \times Z$ such that $p_{13}^* M \cong L$. Further,
  $L|_{X \times \{y_0\} \times Z}$ is trivial
  by the hypothesis, so $M$ is trivial. Thus $L$ is trivial and we will obtain the theorem.
  \item[Step 2] $\;$ For any closed point $x \in X$, lemma 2.21 tells us that there is a projective cureve $C$ on $X$ passing $x_0$ and $x_1$. Let $\tilde{C} \to C$ be the normalization of $C$. Suppose that we show Theorem 2.23 for $X= \tilde{C}$. Then $L|_{\tilde{C} \times Y \times Z}$ will be trivial,
  so $L|_{ \{x\} \times Y \times \{z\} }$ will be trivial for any closed point $z \in Z$.
  As $x$ is an arbitrary closed point of $X$, by Step 1, we will obtain Theorem 2.23 for general $X$.
  \item[Step 3] By Step 2, we may assume that $X$ is a smooth projective curve. To conclude the proof, we here use some properties of the Jacobian variety $J$ of $X$, which we explain in Section 2.8 below. By [Hartshorne"Algebraic Geometry" section3 -9.9], $L$ has degree zero on each fiber of $X \times (Y \times Z) \to Y \times Z$. Thus $L$ defines a morphism
  \[
  f \colon Y \times Z \to J.
  \]
  Because both $\{y_0\} \times Z$ and $Y \times \{z_0\}$ are mapped to $0$ by $f$, the rigidity lemma tells us that the whole $Y \times Z$ is also mapped to $0$ by $f$. Thus $L$ is trivial on $X \times Y \times Z$.
\end{description}
}

\begin{que} ${}$
  \begin{description}
    \item[(1)]「To conclude the proof, we here use some properties of the Jacobian variety $J$ of $X$,」とありますが、$X$のヤコビ多様体とはなんでしょうか。（定義がわかりません）そしてここで使う性質とは何でしょうか。
    \item[(2)] 「$L$ has degree zero on each fiber of $X \times (Y \times Z) \to Y \times Z$. 」とあります。これはどうしてでしょうか。
    Hartshorneの引用された定理を見ると、Hilbert多項式がからんでいるようなのですが、そこから先に進めません。
    \item[(3)] 「Thus $L$ defines a morphism $f \colon Y \times Z \to J.$」とありますが、これはなぜでしょうか。どういう射でしょうか。
  \end{description}
  以上です。
\end{que}
\end{comment}

\bfsubsection{Cor 2.25}
\barquo{
Let $A$ be an abelian variety of dimension $g$ over $F$.
\begin{description}
  \item[(1)] For any integer $n$, $[n] \colon A \to A$ is a finite and flat morphism of degree $n^{2g}$.
  \item[(2)] The abelian group $A(\ol{F})$ is divisible, i.e., for any $x \in A(\ol{F})$ and for any positive integer $n$, there is a $y \in A(\ol{F})$ with $[n](y) = x$.
\end{description}
}
\begin{proof} ${}$
  \begin{description}
    \item[(1)] $L$をevenかつampleなline bundleとする。$[n]^* L = L^{n^2}$より$[n]^* L$もampleである。$[n]^*L$がampleということは、（閉とは限らない）埋め込み
    \[
    \psi_{\abs{\wt{L}}} \colon A \to \P(\grG (A, \wt{L})^{\vee}  )
    \]
    がある。ただし$\wt{L} = [n]^* L$であり、${}^{\vee}$は双対空間を表す。このとき次の図式は可換。
    \[
    \xymatrix{
    A  \ar[r]^-{\psi_{\abs{\wt{L}}}} & \P(\grG (A, \wt{L})^{\vee}  ) \\
    \Ker [n] \ar[u] \ar[r]^-{\psi_{\abs{ \Ker [n] }  }} & \P(\grG (\Ker [n], \wt{L}|_{\Ker [n] } )^{\vee}  ) \ar[u]
    }
    \]
    ここで$\wt{L}|_{\Ker [n] }$は自明なので$\Ker [n]$の既約性分への分解を$\Ker [n] = \coprod_{i \in I} P_i$とすると、各成分$P_i$の$\psi_{\abs{ \Ker [n] }} $による像は$\P^{0}(F)$に含まれる。つまり一点である。
    したがって、$\psi_{\abs{\wt{L}}}$は埋め込みなので各$P_i$は一点である。
    よって$\dim \Ker [n] =  0$である。

    また$[n]$はprojective varietyの間の射なのでprojectiveであり、とくに固有である。$\dim \Ker [n] =  0$であることをいま示したが、$[n]$は準同型なのですべての点のfiberの次元が等しい。ゆえに固有かつすべての点でのfiberの次元がゼロなので$[n]$はfiniteである。とくにfiberの次元が任意の点で等しいので$[n]$はflatである。

    次にdegreeについて考える。ここでのdegreeは交点数を用いて定義される。ample line bundle $L$について
    \[
    L^{\cdot g} = (L. \cdots . L)
    \]
    と定義する。右辺の$L$は$g$個ある。(Reference: 石井志保子「特異点入門」)交点数は多重線形なので
    \[
    ( [n]^* L)^{\cdot g} = (L^{n^2}. \cdots . L^{n^2}) = n^{2g} L^{\cdot g}
    \]
    が従う。よってdegreeの定義から$\deg [n] = n^{2g}$である。
    \item[(2)] $[n] \colon A \to A$は固有なのでその像$[n](A)$は閉部分多様体である。また$[n]$はflatなので
    \[
    \dim_0 A + \dim_0 \Ker [n] = \dim_0 [n](A)
    \]
    が成り立つ。よって$\dim \Ker [n] =  0$より$\dim A = \dim_0 A = \dim_0 [n](A) = \dim [n](A)$である。真閉部分多様体は次元が落ちるはずなので$A = [n](A)$がわかる。
  \end{description}
\end{proof}


\bfsubsection{Lemma 2.27}
\barquo{
If $D$ is an effective Cartier divisor on an abelian variety $A$, then $\abs{2D}$ is base point free. In particular, $D$ is nef.
}
\begin{rem}
  まず用語について解説する。$D$がbase point freeとは、rational map
  \[
  \psi_{\abs{D}} \colon A \dashrightarrow \P ( \grG (A, D)^{\vee} )
  \]
  が$A$全体で定義されることである。言い換えれば、
  \[
  \setmid{x \in A}{ \forall  0 \neq s \in \grG(A,D) \; s(x)=0 } = \emptyset
  \]
  ということである。また$D$がnef(数値的正、ネフ)とは
\[
\forall C \text{ irreducible curve} \; (D.C) \geq 0
\]
(交点数がゼロ以上)として定義される。

さてeffectiveなCartier divisor $D$について、$2D$がbase point freeならば$D$がnefであることを確かめよう。$2D$がnefならあきらかに$D$もnefなので、はじめから$D$がbase point freeだと仮定して$D$がnefだといえばよい。

いま$D$はeffectiveなので既約曲線$C$が$C \not\subset D$である限り、$(D.C) \geq 0$となる。交点数は線形同値なもの同士を入れ替えても不変なので、どんな$C$についてもある$D$と線形同値な$D'$があって$C \not\subset D'$となることをいえばよい。

ハイリホーで示す。ある既約曲線$C$が存在して、すべての$D' \sim D$なる$D'$について$C \subset D'$であったとする。いま$\psi_{\abs{D}}$の定義から、任意の超曲面$H \subset \P ( \grG (A, D)^{\vee} )$に対して$D \sim \psi_{\abs{D}}^* H$である。$H$はある大域切断$s \in \grG(A,D)$により$H = \setmid{l}{l(s) = 0}$と表せる。
そこでこれを$H_s$とおく。このとき仮定から
\[
\forall s \; C \subset \psi_{\abs{D}}^* H_s
\]
であるが、$\psi_{\abs{D}}^* H_s = \setmid{x \in A}{s(x)=0}$であったため、$D$がbase point freeであったことより$C = \emptyset$となるしかない。これは矛盾である。
\end{rem}
